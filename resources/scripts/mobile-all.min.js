!function(t) {
    t(function() {
        t.support.transition = function() {
            var t = function() {
                var t, e = document.createElement("bootstrap"), n = {
                    WebkitTransition: "webkitTransitionEnd",
                    MozTransition: "transitionend",
                    OTransition: "oTransitionEnd otransitionend",
                    transition: "transitionend"
                };
                for (t in n) if (void 0 !== e.style[t]) return n[t];
            }();
            return t && {
                end: t
            };
        }();
    });
}(window.jQuery), !function(t) {
    var e = function(e, n) {
        this.options = n, this.$element = t(e).delegate('[data-dismiss="modal"]', "click.dismiss.modal", t.proxy(this.hide, this)), 
        this.options.remote && this.$element.find(".modal-body").load(this.options.remote);
    };
    e.prototype = {
        constructor: e,
        toggle: function() {
            return this[this.isShown ? "hide" : "show"]();
        },
        show: function() {
            var e = this, n = t.Event("show");
            this.$element.trigger(n), this.isShown || n.isDefaultPrevented() || (this.isShown = !0, 
            this.escape(), this.backdrop(function() {
                var n = t.support.transition && e.$element.hasClass("fade");
                e.$element.parent().length || e.$element.appendTo(document.body), e.$element.show(), 
                n && e.$element[0].offsetWidth, e.$element.addClass("in").attr("aria-hidden", !1), 
                e.enforceFocus(), n ? e.$element.one(t.support.transition.end, function() {
                    e.$element.focus().trigger("shown");
                }) : e.$element.focus().trigger("shown");
            }));
        },
        hide: function(e) {
            e && e.preventDefault(), e = t.Event("hide"), this.$element.trigger(e), this.isShown && !e.isDefaultPrevented() && (this.isShown = !1, 
            this.escape(), t(document).off("focusin.modal"), this.$element.removeClass("in").attr("aria-hidden", !0), 
            t.support.transition && this.$element.hasClass("fade") ? this.hideWithTransition() : this.hideModal());
        },
        enforceFocus: function() {
            var e = this;
            t(document).on("focusin.modal", function(t) {
                e.$element[0] !== t.target && !e.$element.has(t.target).length && e.$element.focus();
            });
        },
        escape: function() {
            var t = this;
            this.isShown && this.options.keyboard ? this.$element.on("keyup.dismiss.modal", function(e) {
                27 == e.which && t.hide();
            }) : this.isShown || this.$element.off("keyup.dismiss.modal");
        },
        hideWithTransition: function() {
            var e = this, n = setTimeout(function() {
                e.$element.off(t.support.transition.end), e.hideModal();
            }, 500);
            this.$element.one(t.support.transition.end, function() {
                clearTimeout(n), e.hideModal();
            });
        },
        hideModal: function() {
            var t = this;
            this.$element.hide(), this.backdrop(function() {
                t.removeBackdrop(), t.$element.trigger("hidden");
            });
        },
        removeBackdrop: function() {
            this.$backdrop && this.$backdrop.remove(), this.$backdrop = null;
        },
        backdrop: function(e) {
            var n = this.$element.hasClass("fade") ? "fade" : "";
            if (this.isShown && this.options.backdrop) {
                var i = t.support.transition && n;
                if (this.$backdrop = t('<div class="modal-backdrop ' + n + '" />').appendTo(document.body), 
                this.$backdrop.click("static" == this.options.backdrop ? t.proxy(this.$element[0].focus, this.$element[0]) : t.proxy(this.hide, this)), 
                i && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !e) return;
                i ? this.$backdrop.one(t.support.transition.end, e) : e();
            } else !this.isShown && this.$backdrop ? (this.$backdrop.removeClass("in"), t.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one(t.support.transition.end, e) : e()) : e && e();
        }
    };
    var n = t.fn.modal;
    t.fn.modal = function(n) {
        return this.each(function() {
            var i = t(this), s = i.data("modal"), o = t.extend({}, t.fn.modal.defaults, i.data(), "object" == typeof n && n);
            s || i.data("modal", s = new e(this, o)), "string" == typeof n ? s[n]() : o.show && s.show();
        });
    }, t.fn.modal.defaults = {
        backdrop: !0,
        keyboard: !0,
        show: !0
    }, t.fn.modal.Constructor = e, t.fn.modal.noConflict = function() {
        return t.fn.modal = n, this;
    }, t(document).on("click.modal.data-api", '[data-toggle="modal"]', function(e) {
        var n = t(this), i = n.attr("href"), s = t(n.attr("data-target") || i && i.replace(/.*(?=#[^\s]+$)/, "")), o = s.data("modal") ? "toggle" : t.extend({
            remote: !/#/.test(i) && i
        }, s.data(), n.data());
        e.preventDefault(), s.modal(o).one("hide", function() {
            n.focus();
        });
    });
}(window.jQuery), !function(t) {
    function e() {
        t(i).each(function() {
            n(t(this)).removeClass("open");
        });
    }
    function n(e) {
        var n, i = e.attr("data-target");
        return i || (i = e.attr("href"), i = i && /#/.test(i) && i.replace(/.*(?=#[^\s]*$)/, "")), 
        n = i && t(i), n && n.length || (n = e.parent()), n;
    }
    var i = "[data-toggle=dropdown]", s = function(e) {
        var n = t(e).on("click.dropdown.data-api", this.toggle);
        t("html").on("click.dropdown.data-api", function() {
            n.parent().removeClass("open");
        });
    };
    s.prototype = {
        constructor: s,
        toggle: function() {
            var i, s, o = t(this);
            if (!o.is(".disabled, :disabled")) return i = n(o), s = i.hasClass("open"), e(), 
            s || i.toggleClass("open"), o.focus(), !1;
        },
        keydown: function(e) {
            var s, o, a, r, l;
            if (/(38|40|27)/.test(e.keyCode) && (s = t(this), e.preventDefault(), e.stopPropagation(), 
            !s.is(".disabled, :disabled"))) {
                if (a = n(s), r = a.hasClass("open"), !r || r && 27 == e.keyCode) return 27 == e.which && a.find(i).focus(), 
                s.click();
                o = t("[role=menu] li:not(.divider):visible a", a), o.length && (l = o.index(o.filter(":focus")), 
                38 == e.keyCode && l > 0 && l--, 40 == e.keyCode && o.length - 1 > l && l++, ~l || (l = 0), 
                o.eq(l).focus());
            }
        }
    };
    var o = t.fn.dropdown;
    t.fn.dropdown = function(e) {
        return this.each(function() {
            var n = t(this), i = n.data("dropdown");
            i || n.data("dropdown", i = new s(this)), "string" == typeof e && i[e].call(n);
        });
    }, t.fn.dropdown.Constructor = s, t.fn.dropdown.noConflict = function() {
        return t.fn.dropdown = o, this;
    }, t(document).on("click.dropdown.data-api", e).on("click.dropdown.data-api", ".dropdown form", function(t) {
        t.stopPropagation();
    }).on("click.dropdown-menu", function(t) {
        t.stopPropagation();
    }).on("click.dropdown.data-api", i, s.prototype.toggle).on("keydown.dropdown.data-api", i + ", [role=menu]", s.prototype.keydown);
}(window.jQuery), !function(t) {
    function e(e, n) {
        var i, s = t.proxy(this.process, this), o = t(e).is("body") ? t(window) : t(e);
        this.options = t.extend({}, t.fn.scrollspy.defaults, n), this.$scrollElement = o.on("scroll.scroll-spy.data-api", s), 
        this.selector = (this.options.target || (i = t(e).attr("href")) && i.replace(/.*(?=#[^\s]+$)/, "") || "") + " .nav li > a", 
        this.$body = t("body"), this.refresh(), this.process();
    }
    e.prototype = {
        constructor: e,
        refresh: function() {
            var e, n = this;
            this.offsets = t([]), this.targets = t([]), e = this.$body.find(this.selector).map(function() {
                var e = t(this), i = e.data("target") || e.attr("href"), s = /^#\w/.test(i) && t(i);
                return s && s.length && [ [ s.position().top + (!t.isWindow(n.$scrollElement.get(0)) && n.$scrollElement.scrollTop()), i ] ] || null;
            }).sort(function(t, e) {
                return t[0] - e[0];
            }).each(function() {
                n.offsets.push(this[0]), n.targets.push(this[1]);
            });
        },
        process: function() {
            var t, e = this.$scrollElement.scrollTop() + this.options.offset, n = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight, i = n - this.$scrollElement.height(), s = this.offsets, o = this.targets, a = this.activeTarget;
            if (e >= i) return a != (t = o.last()[0]) && this.activate(t);
            for (t = s.length; t--; ) a != o[t] && e >= s[t] && (!s[t + 1] || s[t + 1] >= e) && this.activate(o[t]);
        },
        activate: function(e) {
            var n, i;
            this.activeTarget = e, t(this.selector).parent(".active").removeClass("active"), 
            i = this.selector + '[data-target="' + e + '"],' + this.selector + '[href="' + e + '"]', 
            n = t(i).parent("li").addClass("active"), n.parent(".dropdown-menu").length && (n = n.closest("li.dropdown").addClass("active")), 
            n.trigger("activate");
        }
    };
    var n = t.fn.scrollspy;
    t.fn.scrollspy = function(n) {
        return this.each(function() {
            var i = t(this), s = i.data("scrollspy"), o = "object" == typeof n && n;
            s || i.data("scrollspy", s = new e(this, o)), "string" == typeof n && s[n]();
        });
    }, t.fn.scrollspy.Constructor = e, t.fn.scrollspy.defaults = {
        offset: 10
    }, t.fn.scrollspy.noConflict = function() {
        return t.fn.scrollspy = n, this;
    }, t(window).on("load", function() {
        t('[data-spy="scroll"]').each(function() {
            var e = t(this);
            e.scrollspy(e.data());
        });
    });
}(window.jQuery), !function(t) {
    var e = function(e) {
        this.element = t(e);
    };
    e.prototype = {
        constructor: e,
        show: function() {
            var e, n, i, s = this.element, o = s.closest("ul:not(.dropdown-menu)"), a = s.attr("data-target");
            a || (a = s.attr("href"), a = a && a.replace(/.*(?=#[^\s]*$)/, "")), s.parent("li").hasClass("active") || (e = o.find(".active:last a")[0], 
            i = t.Event("show", {
                relatedTarget: e
            }), s.trigger(i), i.isDefaultPrevented() || (n = t(a), this.activate(s.parent("li"), o), 
            this.activate(n, n.parent(), function() {
                s.trigger({
                    type: "shown",
                    relatedTarget: e
                });
            })));
        },
        activate: function(e, n, i) {
            function s() {
                o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"), 
                e.addClass("active"), a ? (e[0].offsetWidth, e.addClass("in")) : e.removeClass("fade"), 
                e.parent(".dropdown-menu") && e.closest("li.dropdown").addClass("active"), i && i();
            }
            var o = n.find("> .active"), a = i && t.support.transition && o.hasClass("fade");
            a ? o.one(t.support.transition.end, s) : s(), o.removeClass("in");
        }
    };
    var n = t.fn.tab;
    t.fn.tab = function(n) {
        return this.each(function() {
            var i = t(this), s = i.data("tab");
            s || i.data("tab", s = new e(this)), "string" == typeof n && s[n]();
        });
    }, t.fn.tab.Constructor = e, t.fn.tab.noConflict = function() {
        return t.fn.tab = n, this;
    }, t(document).on("click.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]', function(e) {
        e.preventDefault(), t(this).tab("show");
    });
}(window.jQuery), !function(t) {
    var e = function(t, e) {
        this.init("tooltip", t, e);
    };
    e.prototype = {
        constructor: e,
        init: function(e, n, i) {
            var s, o, a, r, l;
            for (this.type = e, this.$element = t(n), this.options = this.getOptions(i), this.enabled = !0, 
            a = this.options.trigger.split(" "), l = a.length; l--; ) r = a[l], "click" == r ? this.$element.on("click." + this.type, this.options.selector, t.proxy(this.toggle, this)) : "manual" != r && (s = "hover" == r ? "mouseenter" : "focus", 
            o = "hover" == r ? "mouseleave" : "blur", this.$element.on(s + "." + this.type, this.options.selector, t.proxy(this.enter, this)), 
            this.$element.on(o + "." + this.type, this.options.selector, t.proxy(this.leave, this)));
            this.options.selector ? this._options = t.extend({}, this.options, {
                trigger: "manual",
                selector: ""
            }) : this.fixTitle();
        },
        getOptions: function(e) {
            return e = t.extend({}, t.fn[this.type].defaults, this.$element.data(), e), e.delay && "number" == typeof e.delay && (e.delay = {
                show: e.delay,
                hide: e.delay
            }), e;
        },
        enter: function(e) {
            var n, i = t.fn[this.type].defaults, s = {};
            return this._options && t.each(this._options, function(t, e) {
                i[t] != e && (s[t] = e);
            }, this), n = t(e.currentTarget)[this.type](s).data(this.type), n.options.delay && n.options.delay.show ? (clearTimeout(this.timeout), 
            n.hoverState = "in", this.timeout = setTimeout(function() {
                "in" == n.hoverState && n.show();
            }, n.options.delay.show), void 0) : n.show();
        },
        leave: function(e) {
            var n = t(e.currentTarget)[this.type](this._options).data(this.type);
            return this.timeout && clearTimeout(this.timeout), n.options.delay && n.options.delay.hide ? (n.hoverState = "out", 
            this.timeout = setTimeout(function() {
                "out" == n.hoverState && n.hide();
            }, n.options.delay.hide), void 0) : n.hide();
        },
        show: function() {
            var e, n, i, s, o, a, r = t.Event("show");
            if (this.hasContent() && this.enabled) {
                if (this.$element.trigger(r), r.isDefaultPrevented()) return;
                switch (e = this.tip(), this.setContent(), this.options.animation && e.addClass("fade"), 
                o = "function" == typeof this.options.placement ? this.options.placement.call(this, e[0], this.$element[0]) : this.options.placement, 
                e.detach().css({
                    top: 0,
                    left: 0,
                    display: "block"
                }), this.options.container ? e.appendTo(this.options.container) : e.insertAfter(this.$element), 
                n = this.getPosition(), i = e[0].offsetWidth, s = e[0].offsetHeight, o) {
                  case "bottom":
                    a = {
                        top: n.top + n.height,
                        left: n.left + n.width / 2 - i / 2
                    };
                    break;

                  case "top":
                    a = {
                        top: n.top - s,
                        left: n.left + n.width / 2 - i / 2
                    };
                    break;

                  case "left":
                    a = {
                        top: n.top + n.height / 2 - s / 2,
                        left: n.left - i
                    };
                    break;

                  case "right":
                    a = {
                        top: n.top + n.height / 2 - s / 2,
                        left: n.left + n.width
                    };
                }
                this.applyPlacement(a, o), this.$element.trigger("shown");
            }
        },
        applyPlacement: function(t, e) {
            var n, i, s, o, a = this.tip(), r = a[0].offsetWidth, l = a[0].offsetHeight;
            a.offset(t).addClass(e).addClass("in"), n = a[0].offsetWidth, i = a[0].offsetHeight, 
            "top" == e && i != l && (t.top = t.top + l - i, o = !0), "bottom" == e || "top" == e ? (s = 0, 
            0 > t.left && (s = -2 * t.left, t.left = 0, a.offset(t), n = a[0].offsetWidth, i = a[0].offsetHeight), 
            this.replaceArrow(s - r + n, n, "left")) : this.replaceArrow(i - l, i, "top"), o && a.offset(t);
        },
        replaceArrow: function(t, e, n) {
            this.arrow().css(n, t ? 50 * (1 - t / e) + "%" : "");
        },
        setContent: function() {
            var t = this.tip(), e = this.getTitle();
            t.find(".tooltip-inner")[this.options.html ? "html" : "text"](e), t.removeClass("fade in top bottom left right");
        },
        hide: function() {
            function e() {
                var e = setTimeout(function() {
                    n.off(t.support.transition.end).detach();
                }, 500);
                n.one(t.support.transition.end, function() {
                    clearTimeout(e), n.detach();
                });
            }
            var n = this.tip(), i = t.Event("hide");
            return this.$element.trigger(i), i.isDefaultPrevented() ? void 0 : (n.removeClass("in"), 
            t.support.transition && this.$tip.hasClass("fade") ? e() : n.detach(), this.$element.trigger("hidden"), 
            this);
        },
        fixTitle: function() {
            var t = this.$element;
            (t.attr("title") || "string" != typeof t.attr("data-original-title")) && t.attr("data-original-title", t.attr("title") || "").attr("title", "");
        },
        hasContent: function() {
            return this.getTitle();
        },
        getPosition: function() {
            var e = this.$element[0];
            return t.extend({}, "function" == typeof e.getBoundingClientRect ? e.getBoundingClientRect() : {
                width: e.offsetWidth,
                height: e.offsetHeight
            }, this.$element.offset());
        },
        getTitle: function() {
            var t, e = this.$element, n = this.options;
            return t = e.attr("data-original-title") || ("function" == typeof n.title ? n.title.call(e[0]) : n.title);
        },
        tip: function() {
            return this.$tip = this.$tip || t(this.options.template);
        },
        arrow: function() {
            return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow");
        },
        validate: function() {
            this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null);
        },
        enable: function() {
            this.enabled = !0;
        },
        disable: function() {
            this.enabled = !1;
        },
        toggleEnabled: function() {
            this.enabled = !this.enabled;
        },
        toggle: function(e) {
            var n = e ? t(e.currentTarget)[this.type](this._options).data(this.type) : this;
            n.tip().hasClass("in") ? n.hide() : n.show();
        },
        destroy: function() {
            this.hide().$element.off("." + this.type).removeData(this.type);
        }
    };
    var n = t.fn.tooltip;
    t.fn.tooltip = function(n) {
        return this.each(function() {
            var i = t(this), s = i.data("tooltip"), o = "object" == typeof n && n;
            s || i.data("tooltip", s = new e(this, o)), "string" == typeof n && s[n]();
        });
    }, t.fn.tooltip.Constructor = e, t.fn.tooltip.defaults = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1
    }, t.fn.tooltip.noConflict = function() {
        return t.fn.tooltip = n, this;
    };
}(window.jQuery), !function(t) {
    var e = function(t, e) {
        this.init("popover", t, e);
    };
    e.prototype = t.extend({}, t.fn.tooltip.Constructor.prototype, {
        constructor: e,
        setContent: function() {
            var t = this.tip(), e = this.getTitle(), n = this.getContent();
            t.find(".popover-title")[this.options.html ? "html" : "text"](e), t.find(".popover-content")[this.options.html ? "html" : "text"](n), 
            t.removeClass("fade top bottom left right in");
        },
        hasContent: function() {
            return this.getTitle() || this.getContent();
        },
        getContent: function() {
            var t, e = this.$element, n = this.options;
            return t = ("function" == typeof n.content ? n.content.call(e[0]) : n.content) || e.attr("data-content");
        },
        tip: function() {
            return this.$tip || (this.$tip = t(this.options.template)), this.$tip;
        },
        destroy: function() {
            this.hide().$element.off("." + this.type).removeData(this.type);
        }
    });
    var n = t.fn.popover;
    t.fn.popover = function(n) {
        return this.each(function() {
            var i = t(this), s = i.data("popover"), o = "object" == typeof n && n;
            s || i.data("popover", s = new e(this, o)), "string" == typeof n && s[n]();
        });
    }, t.fn.popover.Constructor = e, t.fn.popover.defaults = t.extend({}, t.fn.tooltip.defaults, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    }), t.fn.popover.noConflict = function() {
        return t.fn.popover = n, this;
    };
}(window.jQuery), !function(t) {
    var e = function(e, n) {
        this.options = t.extend({}, t.fn.affix.defaults, n), this.$window = t(window).on("scroll.affix.data-api", t.proxy(this.checkPosition, this)).on("click.affix.data-api", t.proxy(function() {
            setTimeout(t.proxy(this.checkPosition, this), 1);
        }, this)), this.$element = t(e), this.checkPosition();
    };
    e.prototype.checkPosition = function() {
        if (this.$element.is(":visible")) {
            var e, n = t(document).height(), i = this.$window.scrollTop(), s = this.$element.offset(), o = this.options.offset, a = o.bottom, r = o.top, l = "affix affix-top affix-bottom";
            "object" != typeof o && (a = r = o), "function" == typeof r && (r = o.top()), "function" == typeof a && (a = o.bottom()), 
            e = null != this.unpin && s.top >= i + this.unpin ? !1 : null != a && s.top + this.$element.height() >= n - a ? "bottom" : null != r && r >= i ? "top" : !1, 
            this.affixed !== e && (this.affixed = e, this.unpin = "bottom" == e ? s.top - i : null, 
            this.$element.removeClass(l).addClass("affix" + (e ? "-" + e : "")));
        }
    };
    var n = t.fn.affix;
    t.fn.affix = function(n) {
        return this.each(function() {
            var i = t(this), s = i.data("affix"), o = "object" == typeof n && n;
            s || i.data("affix", s = new e(this, o)), "string" == typeof n && s[n]();
        });
    }, t.fn.affix.Constructor = e, t.fn.affix.defaults = {
        offset: 0
    }, t.fn.affix.noConflict = function() {
        return t.fn.affix = n, this;
    }, t(window).on("load", function() {
        t('[data-spy="affix"]').each(function() {
            var e = t(this), n = e.data();
            n.offset = n.offset || {}, n.offsetBottom && (n.offset.bottom = n.offsetBottom), 
            n.offsetTop && (n.offset.top = n.offsetTop), e.affix(n);
        });
    });
}(window.jQuery), !function(t) {
    var e = '[data-dismiss="alert"]', n = function(n) {
        t(n).on("click", e, this.close);
    };
    n.prototype.close = function(e) {
        function n() {
            i.trigger("closed").remove();
        }
        var i, s = t(this), o = s.attr("data-target");
        o || (o = s.attr("href"), o = o && o.replace(/.*(?=#[^\s]*$)/, "")), i = t(o), e && e.preventDefault(), 
        i.length || (i = s.hasClass("alert") ? s : s.parent()), i.trigger(e = t.Event("close")), 
        e.isDefaultPrevented() || (i.removeClass("in"), t.support.transition && i.hasClass("fade") ? i.on(t.support.transition.end, n) : n());
    };
    var i = t.fn.alert;
    t.fn.alert = function(e) {
        return this.each(function() {
            var i = t(this), s = i.data("alert");
            s || i.data("alert", s = new n(this)), "string" == typeof e && s[e].call(i);
        });
    }, t.fn.alert.Constructor = n, t.fn.alert.noConflict = function() {
        return t.fn.alert = i, this;
    }, t(document).on("click.alert.data-api", e, n.prototype.close);
}(window.jQuery), !function(t) {
    var e = function(e, n) {
        this.$element = t(e), this.options = t.extend({}, t.fn.button.defaults, n);
    };
    e.prototype.setState = function(t) {
        var e = "disabled", n = this.$element, i = n.data(), s = n.is("input") ? "val" : "html";
        t += "Text", i.resetText || n.data("resetText", n[s]()), n[s](i[t] || this.options[t]), 
        setTimeout(function() {
            "loadingText" == t ? n.addClass(e).attr(e, e) : n.removeClass(e).removeAttr(e);
        }, 0);
    }, e.prototype.toggle = function() {
        var t = this.$element.closest('[data-toggle="buttons-radio"]');
        t && t.find(".active").removeClass("active"), this.$element.toggleClass("active");
    };
    var n = t.fn.button;
    t.fn.button = function(n) {
        return this.each(function() {
            var i = t(this), s = i.data("button"), o = "object" == typeof n && n;
            s || i.data("button", s = new e(this, o)), "toggle" == n ? s.toggle() : n && s.setState(n);
        });
    }, t.fn.button.defaults = {
        loadingText: "loading..."
    }, t.fn.button.Constructor = e, t.fn.button.noConflict = function() {
        return t.fn.button = n, this;
    }, t(document).on("click.button.data-api", "[data-toggle^=button]", function(e) {
        var n = t(e.target);
        n.hasClass("btn") || (n = n.closest(".btn")), n.button("toggle");
    });
}(window.jQuery), !function(t) {
    var e = function(e, n) {
        this.$element = t(e), this.options = t.extend({}, t.fn.collapse.defaults, n), this.options.parent && (this.$parent = t(this.options.parent)), 
        this.options.toggle && this.toggle();
    };
    e.prototype = {
        constructor: e,
        dimension: function() {
            var t = this.$element.hasClass("width");
            return t ? "width" : "height";
        },
        show: function() {
            var e, n, i, s;
            if (!this.transitioning && !this.$element.hasClass("in")) {
                if (e = this.dimension(), n = t.camelCase([ "scroll", e ].join("-")), i = this.$parent && this.$parent.find("> .accordion-group > .in"), 
                i && i.length) {
                    if (s = i.data("collapse"), s && s.transitioning) return;
                    i.collapse("hide"), s || i.data("collapse", null);
                }
                this.$element[e](0), this.transition("addClass", t.Event("show"), "shown"), t.support.transition && this.$element[e](this.$element[0][n]);
            }
        },
        hide: function() {
            var e;
            !this.transitioning && this.$element.hasClass("in") && (e = this.dimension(), this.reset(this.$element[e]()), 
            this.transition("removeClass", t.Event("hide"), "hidden"), this.$element[e](0));
        },
        reset: function(t) {
            var e = this.dimension();
            return this.$element.removeClass("collapse")[e](t || "auto")[0].offsetWidth, this.$element[null !== t ? "addClass" : "removeClass"]("collapse"), 
            this;
        },
        transition: function(e, n, i) {
            var s = this, o = function() {
                "show" == n.type && s.reset(), s.transitioning = 0, s.$element.trigger(i);
            };
            this.$element.trigger(n), n.isDefaultPrevented() || (this.transitioning = 1, this.$element[e]("in"), 
            t.support.transition && this.$element.hasClass("collapse") ? this.$element.one(t.support.transition.end, o) : o());
        },
        toggle: function() {
            this[this.$element.hasClass("in") ? "hide" : "show"]();
        }
    };
    var n = t.fn.collapse;
    t.fn.collapse = function(n) {
        return this.each(function() {
            var i = t(this), s = i.data("collapse"), o = t.extend({}, t.fn.collapse.defaults, i.data(), "object" == typeof n && n);
            s || i.data("collapse", s = new e(this, o)), "string" == typeof n && s[n]();
        });
    }, t.fn.collapse.defaults = {
        toggle: !0
    }, t.fn.collapse.Constructor = e, t.fn.collapse.noConflict = function() {
        return t.fn.collapse = n, this;
    }, t(document).on("click.collapse.data-api", "[data-toggle=collapse]", function(e) {
        var n, i = t(this), s = i.attr("data-target") || e.preventDefault() || (n = i.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, ""), o = t(s).data("collapse") ? "toggle" : i.data();
        i[t(s).hasClass("in") ? "addClass" : "removeClass"]("collapsed"), t(s).collapse(o);
    });
}(window.jQuery), !function(t) {
    var e = function(e, n) {
        this.$element = t(e), this.$indicators = this.$element.find(".carousel-indicators"), 
        this.options = n, "hover" == this.options.pause && this.$element.on("mouseenter", t.proxy(this.pause, this)).on("mouseleave", t.proxy(this.cycle, this));
    };
    e.prototype = {
        cycle: function(e) {
            return e || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(t.proxy(this.next, this), this.options.interval)), 
            this;
        },
        getActiveIndex: function() {
            return this.$active = this.$element.find(".item.active"), this.$items = this.$active.parent().children(), 
            this.$items.index(this.$active);
        },
        to: function(e) {
            var n = this.getActiveIndex(), i = this;
            if (!(e > this.$items.length - 1 || 0 > e)) return this.sliding ? this.$element.one("slid", function() {
                i.to(e);
            }) : n == e ? this.pause().cycle() : this.slide(e > n ? "next" : "prev", t(this.$items[e]));
        },
        pause: function(e) {
            return e || (this.paused = !0), this.$element.find(".next, .prev").length && t.support.transition.end && (this.$element.trigger(t.support.transition.end), 
            this.cycle(!0)), clearInterval(this.interval), this.interval = null, this;
        },
        next: function() {
            return this.sliding ? void 0 : this.slide("next");
        },
        prev: function() {
            return this.sliding ? void 0 : this.slide("prev");
        },
        slide: function(e, n) {
            var i, s = this.$element.find(".item.active"), o = n || s[e](), a = this.interval, r = "next" == e ? "left" : "right", l = "next" == e ? "first" : "last", h = this;
            if (this.sliding = !0, a && this.pause(), o = o.length ? o : this.$element.find(".item")[l](), 
            i = t.Event("slide", {
                relatedTarget: o[0],
                direction: r
            }), !o.hasClass("active")) {
                if (this.$indicators.length && (this.$indicators.find(".active").removeClass("active"), 
                this.$element.one("slid", function() {
                    var e = t(h.$indicators.children()[h.getActiveIndex()]);
                    e && e.addClass("active");
                })), t.support.transition && this.$element.hasClass("slide")) {
                    if (this.$element.trigger(i), i.isDefaultPrevented()) return;
                    o.addClass(e), o[0].offsetWidth, s.addClass(r), o.addClass(r), this.$element.one(t.support.transition.end, function() {
                        o.removeClass([ e, r ].join(" ")).addClass("active"), s.removeClass([ "active", r ].join(" ")), 
                        h.sliding = !1, setTimeout(function() {
                            h.$element.trigger("slid");
                        }, 0);
                    });
                } else {
                    if (this.$element.trigger(i), i.isDefaultPrevented()) return;
                    s.removeClass("active"), o.addClass("active"), this.sliding = !1, this.$element.trigger("slid");
                }
                return a && this.cycle(), this;
            }
        }
    };
    var n = t.fn.carousel;
    t.fn.carousel = function(n) {
        return this.each(function() {
            var i = t(this), s = i.data("carousel"), o = t.extend({}, t.fn.carousel.defaults, "object" == typeof n && n), a = "string" == typeof n ? n : o.slide;
            s || i.data("carousel", s = new e(this, o)), "number" == typeof n ? s.to(n) : a ? s[a]() : o.interval && s.pause().cycle();
        });
    }, t.fn.carousel.defaults = {
        interval: 5e3,
        pause: "hover"
    }, t.fn.carousel.Constructor = e, t.fn.carousel.noConflict = function() {
        return t.fn.carousel = n, this;
    }, t(document).on("click.carousel.data-api", "[data-slide], [data-slide-to]", function(e) {
        var n, i, s = t(this), o = t(s.attr("data-target") || (n = s.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, "")), a = t.extend({}, o.data(), s.data());
        o.carousel(a), (i = s.attr("data-slide-to")) && o.data("carousel").pause().to(i).cycle(), 
        e.preventDefault();
    });
}(window.jQuery), !function(t) {
    var e = function(e, n) {
        this.$element = t(e), this.options = t.extend({}, t.fn.typeahead.defaults, n), this.matcher = this.options.matcher || this.matcher, 
        this.sorter = this.options.sorter || this.sorter, this.highlighter = this.options.highlighter || this.highlighter, 
        this.updater = this.options.updater || this.updater, this.source = this.options.source, 
        this.$menu = t(this.options.menu), this.shown = !1, this.listen();
    };
    e.prototype = {
        constructor: e,
        select: function() {
            var t = this.$menu.find(".active").attr("data-value");
            return this.$element.val(this.updater(t)).change(), this.hide();
        },
        updater: function(t) {
            return t;
        },
        show: function() {
            var e = t.extend({}, this.$element.position(), {
                height: this.$element[0].offsetHeight
            });
            return this.$menu.insertAfter(this.$element).css({
                top: e.top + e.height,
                left: e.left
            }).show(), this.shown = !0, this;
        },
        hide: function() {
            return this.$menu.hide(), this.shown = !1, this;
        },
        lookup: function() {
            var e;
            return this.query = this.$element.val(), !this.query || this.options.minLength > this.query.length ? this.shown ? this.hide() : this : (e = t.isFunction(this.source) ? this.source(this.query, t.proxy(this.process, this)) : this.source, 
            e ? this.process(e) : this);
        },
        process: function(e) {
            var n = this;
            return e = t.grep(e, function(t) {
                return n.matcher(t);
            }), e = this.sorter(e), e.length ? this.render(e.slice(0, this.options.items)).show() : this.shown ? this.hide() : this;
        },
        matcher: function(t) {
            return ~t.toLowerCase().indexOf(this.query.toLowerCase());
        },
        sorter: function(t) {
            for (var e, n = [], i = [], s = []; e = t.shift(); ) e.toLowerCase().indexOf(this.query.toLowerCase()) ? ~e.indexOf(this.query) ? i.push(e) : s.push(e) : n.push(e);
            return n.concat(i, s);
        },
        highlighter: function(t) {
            var e = this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
            return t.replace(RegExp("(" + e + ")", "ig"), function(t, e) {
                return "<strong>" + e + "</strong>";
            });
        },
        render: function(e) {
            var n = this;
            return e = t(e).map(function(e, i) {
                return e = t(n.options.item).attr("data-value", i), e.find("a").html(n.highlighter(i)), 
                e[0];
            }), e.first().addClass("active"), this.$menu.html(e), this;
        },
        next: function() {
            var e = this.$menu.find(".active").removeClass("active"), n = e.next();
            n.length || (n = t(this.$menu.find("li")[0])), n.addClass("active");
        },
        prev: function() {
            var t = this.$menu.find(".active").removeClass("active"), e = t.prev();
            e.length || (e = this.$menu.find("li").last()), e.addClass("active");
        },
        listen: function() {
            this.$element.on("focus", t.proxy(this.focus, this)).on("blur", t.proxy(this.blur, this)).on("keypress", t.proxy(this.keypress, this)).on("keyup", t.proxy(this.keyup, this)), 
            this.eventSupported("keydown") && this.$element.on("keydown", t.proxy(this.keydown, this)), 
            this.$menu.on("click", t.proxy(this.click, this)).on("mouseenter", "li", t.proxy(this.mouseenter, this)).on("mouseleave", "li", t.proxy(this.mouseleave, this));
        },
        eventSupported: function(t) {
            var e = t in this.$element;
            return e || (this.$element.setAttribute(t, "return;"), e = "function" == typeof this.$element[t]), 
            e;
        },
        move: function(t) {
            if (this.shown) {
                switch (t.keyCode) {
                  case 9:
                  case 13:
                  case 27:
                    t.preventDefault();
                    break;

                  case 38:
                    t.preventDefault(), this.prev();
                    break;

                  case 40:
                    t.preventDefault(), this.next();
                }
                t.stopPropagation();
            }
        },
        keydown: function(e) {
            this.suppressKeyPressRepeat = ~t.inArray(e.keyCode, [ 40, 38, 9, 13, 27 ]), this.move(e);
        },
        keypress: function(t) {
            this.suppressKeyPressRepeat || this.move(t);
        },
        keyup: function(t) {
            switch (t.keyCode) {
              case 40:
              case 38:
              case 16:
              case 17:
              case 18:
                break;

              case 9:
              case 13:
                if (!this.shown) return;
                this.select();
                break;

              case 27:
                if (!this.shown) return;
                this.hide();
                break;

              default:
                this.lookup();
            }
            t.stopPropagation(), t.preventDefault();
        },
        focus: function() {
            this.focused = !0;
        },
        blur: function() {
            this.focused = !1, !this.mousedover && this.shown && this.hide();
        },
        click: function(t) {
            t.stopPropagation(), t.preventDefault(), this.select(), this.$element.focus();
        },
        mouseenter: function(e) {
            this.mousedover = !0, this.$menu.find(".active").removeClass("active"), t(e.currentTarget).addClass("active");
        },
        mouseleave: function() {
            this.mousedover = !1, !this.focused && this.shown && this.hide();
        }
    };
    var n = t.fn.typeahead;
    t.fn.typeahead = function(n) {
        return this.each(function() {
            var i = t(this), s = i.data("typeahead"), o = "object" == typeof n && n;
            s || i.data("typeahead", s = new e(this, o)), "string" == typeof n && s[n]();
        });
    }, t.fn.typeahead.defaults = {
        source: [],
        items: 8,
        menu: '<ul class="typeahead dropdown-menu"></ul>',
        item: '<li><a href="#"></a></li>',
        minLength: 1
    }, t.fn.typeahead.Constructor = e, t.fn.typeahead.noConflict = function() {
        return t.fn.typeahead = n, this;
    }, t(document).on("focus.typeahead.data-api", '[data-provide="typeahead"]', function() {
        var e = t(this);
        e.data("typeahead") || e.typeahead(e.data());
    });
}(window.jQuery), "object" != typeof JSON && (JSON = {}), function() {
    "use strict";
    function f(t) {
        return 10 > t ? "0" + t : t;
    }
    function quote(t) {
        return escapable.lastIndex = 0, escapable.test(t) ? '"' + t.replace(escapable, function(t) {
            var e = meta[t];
            return "string" == typeof e ? e : "\\u" + ("0000" + t.charCodeAt(0).toString(16)).slice(-4);
        }) + '"' : '"' + t + '"';
    }
    function str(t, e) {
        var n, i, s, o, a, r = gap, l = e[t];
        switch (l && "object" == typeof l && "function" == typeof l.toJSON && (l = l.toJSON(t)), 
        "function" == typeof rep && (l = rep.call(e, t, l)), typeof l) {
          case "string":
            return quote(l);

          case "number":
            return isFinite(l) ? l + "" : "null";

          case "boolean":
          case "null":
            return l + "";

          case "object":
            if (!l) return "null";
            if (gap += indent, a = [], "[object Array]" === Object.prototype.toString.apply(l)) {
                for (o = l.length, n = 0; o > n; n += 1) a[n] = str(n, l) || "null";
                return s = 0 === a.length ? "[]" : gap ? "[\n" + gap + a.join(",\n" + gap) + "\n" + r + "]" : "[" + a.join(",") + "]", 
                gap = r, s;
            }
            if (rep && "object" == typeof rep) for (o = rep.length, n = 0; o > n; n += 1) "string" == typeof rep[n] && (i = rep[n], 
            s = str(i, l), s && a.push(quote(i) + (gap ? ": " : ":") + s)); else for (i in l) Object.prototype.hasOwnProperty.call(l, i) && (s = str(i, l), 
            s && a.push(quote(i) + (gap ? ": " : ":") + s));
            return s = 0 === a.length ? "{}" : gap ? "{\n" + gap + a.join(",\n" + gap) + "\n" + r + "}" : "{" + a.join(",") + "}", 
            gap = r, s;
        }
    }
    "function" != typeof Date.prototype.toJSON && (Date.prototype.toJSON = function() {
        return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" : null;
    }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function() {
        return this.valueOf();
    });
    var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, gap, indent, meta = {
        "\b": "\\b",
        "	": "\\t",
        "\n": "\\n",
        "\f": "\\f",
        "\r": "\\r",
        '"': '\\"',
        "\\": "\\\\"
    }, rep;
    "function" != typeof JSON.stringify && (JSON.stringify = function(t, e, n) {
        var i;
        if (gap = "", indent = "", "number" == typeof n) for (i = 0; n > i; i += 1) indent += " "; else "string" == typeof n && (indent = n);
        if (rep = e, e && "function" != typeof e && ("object" != typeof e || "number" != typeof e.length)) throw Error("JSON.stringify");
        return str("", {
            "": t
        });
    }), "function" != typeof JSON.parse && (JSON.parse = function(text, reviver) {
        function walk(t, e) {
            var n, i, s = t[e];
            if (s && "object" == typeof s) for (n in s) Object.prototype.hasOwnProperty.call(s, n) && (i = walk(s, n), 
            void 0 !== i ? s[n] = i : delete s[n]);
            return reviver.call(t, e, s);
        }
        var j;
        if (text += "", cx.lastIndex = 0, cx.test(text) && (text = text.replace(cx, function(t) {
            return "\\u" + ("0000" + t.charCodeAt(0).toString(16)).slice(-4);
        })), /^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return j = eval("(" + text + ")"), 
        "function" == typeof reviver ? walk({
            "": j
        }, "") : j;
        throw new SyntaxError("JSON.parse");
    });
}();

var CDMobile = {};

CDMobile.urlValidate = function(t) {
    var e = /http:\/\/[\w-]*(\.[\w-]*)+/gi;
    return e.test(t);
}, CDMobile.emailValidate = function(t) {
    var e = /^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/gi;
    return e.test(t);
}, CDMobile.shareToWeixinFriend = function() {
    if ("undefined" == typeof WeixinJSBridge) return !1;
    var t = $(this).attr("data-image"), e = $(this).attr("data-title"), n = $(this).attr("data-desc");
    return WeixinJSBridge.invoke("shareTimeline", {
        img_url: t || "",
        link: location.href,
        desc: n,
        title: e
    }, function(t) {
        WeixinJSBridge.log(t.err_msg);
    }), !1;
}, CDMobile.increaseVisitNums = function(t, e) {
    if (0 >= t || 0 == e.length) return !1;
    var n = "id=" + t, i = $.post(e, n, void 0, "json");
    i.done(function(t) {
        $(".beta-post-detail .beta-visit-nums").text(t);
    });
}, CDMobile.switchImageSize = function(t) {
    t.preventDefault(), _hmt && _hmt.push([ "_trackEvent", "图片", "缩略图与大图切换点击" ]);
    var e = $(this), n = e.parents(".post-item");
    n.find(".thumbnail-more").toggle(), n.find(".thumb-pall").toggle(), e.find(".thumb").toggle(), 
    e.find(".bmiddle").attr("src", e.attr("data-bmiddle-url")).toggle();
    var i = n.position();
    $("body").scrollTop(parseInt(i.top) - 60);
}, CDMobile.ratingPost = function(t) {
    t.preventDefault(), _hmt && _hmt.push([ "_trackEvent", "文章评价", "点击按钮" ]);
    var e = $(this), n = e.parents(".post-box"), i = e.attr("data-id"), s = e.attr("data-score"), o = e.attr("data-url"), a = $.ajax({
        type: "POST",
        url: o,
        data: {
            pid: i,
            score: s
        },
        dataType: "json",
        beforeSend: function() {
            e.toggleClass("voted");
        }
    });
    a.done(function(t) {
        if (0 == t.errno) {
            var i = parseInt(e.text()), s = 0;
            e.hasClass("upscore") ? s = i + 1 : e.hasClass("downscore") && (s = i - 1), e.text(s), 
            n.find("a.upscore, a.downscore").addClass("disabled"), n.find(".item-toolbar").off("click", "a.upscore, a.downscore");
        } else alert("评价出错"), e.toggleClass("voted");
    }), a.fail(function() {
        alert("x"), e.toggleClass("voted");
    });
}, CDMobile.showShareBox = function(t) {
    t.preventDefault(), _hmt && _hmt.push([ "_trackEvent", "分享列表", "显示" ]);
    var e = $(this).parents(".item-toolbar").find("#bdshare");
    if (0 == e.attr("data").length) {
        var n = $(this).parents(".post-box"), i = {
            url: n.find(".item-title a").attr("href"),
            text: "转自@挖段子网：" + $.trim(n.find(".item-title").text()),
            pic: n.find(".thumbbox a").attr("data-bmiddle-url")
        };
        e.attr("data", JSON.stringify(i));
    }
    $(this).parents(".item-toolbar").find(".sharebox:hidden").stop(!0, !0).delay(50).show();
}, CDMobile.hideShareBox = function(t) {
    t.preventDefault(), _hmt && _hmt.push([ "_trackEvent", "分享列表", "隐藏" ]), $(this).parents(".item-toolbar").find(".sharebox:visible").stop(!0, !0).delay(50).hide();
}, CDMobile.fetchComments = function(t) {
    t.preventDefault();
    var e = $(this), n = e.parents(".item-toolbar").next(".comment-list");
    if (n.filter(":visible").length > 0) return n.hide(), _hmt && _hmt.push([ "_trackEvent", "评论", "隐藏评论列表" ]), 
    !0;
    if (n.html().length > 0) return n.show(), _hmt && _hmt.push([ "_trackEvent", "评论", "查看评论列表" ]), 
    !0;
    _hmt && _hmt.push([ "_trackEvent", "评论", "查看评论列表" ]);
    var i = e.attr("data-url"), s = e.text(), o = $.ajax({
        url: i,
        dataType: "json",
        type: "get",
        cache: !0,
        beforeSend: function() {
            e.text("...");
        }
    });
    o.done(function(t) {
        n.html(t.html).show(), n.find("textarea").focus();
    }), o.fail(function() {
        alert("fail");
    }), o.always(function() {
        e.text(s);
    });
}, CDMobile.RatingComment = function(t) {
    t.preventDefault(), _hmt && _hmt.push([ "_trackEvent", "评论评价按钮", "点击" ]);
    var e = $(this), n = parseInt(e.attr("data-id")), i = parseInt(e.attr("data-value")), s = e.parents(".comment-item").find(".comment-score"), o = e.attr("data-url"), a = e.hasClass("pushed"), r = e.parent().find("a.arrow-up").hasClass("pushed"), l = e.parent().find("a.arrow-down").hasClass("pushed"), h = 0;
    r || l ? a ? (e.toggleClass("pushed"), h = i > 0 ? -1 : 1) : (e.parent().find("a").toggleClass("pushed"), 
    h = i > 0 ? 2 : -2) : (e.toggleClass("pushed"), h = i > 0 ? 1 : -1), s.text(parseInt(s.text()) + h);
    var c = $.ajax({
        url: o,
        type: "POST",
        dataType: "json",
        data: {
            id: n,
            score: i
        }
    });
    c.done(function(t) {
        0 == parseInt(t.errno);
    });
}, CDMobile.PostComment = function(t) {
    t.preventDefault();
    var e = $(this).parents("form"), n = e.find(".comment-content"), i = e.next(".caption-error"), s = e.find(".save-caption-loader"), o = n.attr("data-placeholder"), a = $.trim(n.val()), r = parseInt(e.find("input[name=postid]").val());
    if (0 >= r || 0 >= a.length || a == o) return !1;
    var l = $.ajax({
        url: e.attr("action"),
        type: "POST",
        dataType: "json",
        data: e.serialize(),
        beforeSend: function() {
            i.empty().hide(), s.show();
        }
    });
    l.done(function(t) {
        s.hide(), 0 == t.errno ? (i.after(t.html), n.val("").removeClass("expand"), _hmt && _hmt.push([ "_trackEvent", "评论", "评论成功" ])) : (i.html(t.error).show(), 
        _hmt && _hmt.push([ "_trackEvent", "评论", "评论失败" ]));
    }), l.fail(function() {
        s.hide(), i.html("发送请求错误！").show(), _hmt && _hmt.push([ "_trackEvent", "评论", "评论失败" ]);
    });
};

var BetaPost = {
    digg: function(t) {
        t.preventDefault();
        var e = $(this), n = parseInt(e.attr("data-id")), i = e.attr("data-url"), s = "beta_digg", o = JSON.parse($.cookie(s));
        if ($.isArray(o) || (o = []), $.inArray(n, o) > -1) return !1;
        var a = $.ajax({
            type: "post",
            url: i,
            data: {
                pid: n
            },
            dataType: "json"
        });
        a.done(function(t) {
            0 != t.errno && (e.find(".digg-count").text(t.digg_nums), o.push(n), $.unique(o), 
            $.cookie(s, JSON.stringify(o), {
                expires: 7,
                path: "/"
            }));
        }), $(document).off("click", "#beta-digg-button");
    }
}, BetaComment = {
    create: function(t) {
        t.preventDefault();
        var e = $(this), n = e.next(".beta-alert-message");
        0 == n.length && (n = $("#beta-create-message").clone().removeAttr("id"));
        var i = n.find(".text");
        e.after(n);
        var s = e.find(".beta-captcha");
        s.length > 0 && e.find("input.beta-captcha").blur();
        var o = "请输入评论内容";
        if (e.find(".help-block.error").length > 0) return i.html(o), n.removeClass("alert-success").addClass("alert-error").show(), 
        !1;
        var a = e.find(".comment-content"), r = $.trim(a.val()), l = parseInt(a.attr("minlen"));
        if (l = isNaN(l) || 0 == l ? 5 : l, l > r.length) return i.html(o), n.removeClass("alert-success").addClass("alert-error").show(), 
        a.focus(), !1;
        if (s.length > 0) {
            var h = $.trim(s.val());
            if (4 != h.length) return i.html(o), n.removeClass("alert-success").addClass("alert-error").show(), 
            s.focus(), !1;
        }
        var c = e.find("button[type=submit]"), f = $.ajax({
            type: "post",
            url: e.attr("action"),
            data: e.serialize(),
            dataType: "json",
            cache: !1,
            beforeSend: function() {
                c.button("loading"), i.html("发送数据中..."), n.removeClass("alert-error").addClass("alert-success").show();
            }
        });
        return f.done(function(t) {
            if (i.html(t.text), 0 == t.errno) {
                e.find(":text, textarea").val(""), e.find(".beta-control-group").removeClass("success error"), 
                e.find(".beta-control-group").removeClass("alert-success alert-error"), n.removeClass("alert-error").addClass("alert-success").show();
                var s = $(".beta-comment-item:last");
                0 == s.length && (s = $("#beta-comment-list")), s.after(t.html), void 0 == e.attr("id") && e.remove(), 
                e.find(".comment-content").addClass("mini"), $("form .comment-captcha").hide(), 
                $(".beta-no-comments").remove();
            } else n.removeClass("alert-success").addClass("alert-error").show(), e.find(".refresh-captcha").trigger("click");
        }), f.fail(function() {
            f.abort(), i.html("请求错误."), n.removeClass("alert-success").addClass("alert-error").show();
        }), f.always(function() {
            c.button("reset");
        }), !1;
    },
    reply: function() {
        var t = $(this).parents(".beta-comment-item").next("form");
        0 == t.length ? (t = $("#comment-form").clone().removeAttr("id").addClass("comment-reply-form").attr("action", $(this).attr("data-url")), 
        t.find(".comment-captcha").hide(), t.find(":text, textarea").val(""), $(this).parents(".beta-comment-item").after(t), 
        t.find(".beta-control-group").removeClass("error success")) : 0 == t.filter(":visible").length ? t.show() : t.hide(), 
        t.next(".beta-alert-message:visible").hide();
    },
    rating: function(t) {
        t.preventDefault();
        var e = $(this), n = e.parents(".beta-comment-item"), i = n.next(".beta-alert-message");
        0 == i.length && (i = $("#beta-comment-message").clone().removeAttr("id"));
        var s = i.find(".text");
        if (e.attr("data-clicked")) return s.html("您已经参与过了，谢谢"), i.hasClass("alert-success") && i.removeClass("alert-success"), 
        i.hasClass("alert-error") || i.addClass("alert-error"), n.after(i), i.show(), !1;
        var o = e.attr("data-url"), a = $.ajax({
            url: o,
            dataType: "json",
            type: "post",
            cache: !1,
            beforeSend: function() {
                s.html("发送数据中..."), i.removeClass("alert-error").addClass("alert-success"), n.after(i), 
                i.show();
            }
        });
        a.done(function(t) {
            if (0 == t.errno) {
                var o = e.find(".beta-comment-join-nums");
                o.text(parseInt(o.text()) + 1), e.attr("data-clicked", 1), s.html(t.text), i.hasClass("alert-error") && i.removeClass("alert-error"), 
                i.hasClass("alert-success") || i.addClass("alert-success");
            } else i.hasClass("alert-success") && i.removeClass("alert-success"), i.hasClass("alert-error") || i.addClass("alert-error");
            n.after(i), i.show();
        }), a.fail(function() {
            s.html("请求错误."), i.hasClass("alert-success") && i.removeClass("alert-success"), 
            i.hasClass("alert-error") || i.addClass("alert-error"), n.after(i), i.show();
        });
    },
    captchaValidate: function() {
        var t = $(this), e = $.trim(t.val()), n = t.parents(".beta-controls").find(".beta-help-inline"), i = t.parents(".beta-controls").find(".beta-help-error"), s = t.parents(".beta-control-group");
        return n.hide(), 4 == e.length ? (s.removeClass("error").addClass("success"), !0) : (i.show(), 
        s.removeClass("success").addClass("error"), !1);
    },
    contentValidate: function() {
        var t = $(this), e = $.trim(t.val()), n = parseInt(t.attr("minlen")), i = t.parents("form").find(".help-block");
        return n = isNaN(n) || 0 == n ? 5 : n, e.length > n ? (i.removeClass("error").addClass("success"), 
        !0) : (i.removeClass("success").addClass("error"), 0 == e.length && t.addClass("mini"), 
        !1);
    },
    showCaptcha: function() {
        var t = $(this);
        t.removeClass("mini");
        var e = t.parents("form").find(".comment-captcha:hidden");
        if (0 == e.length) return !1;
        var n = t.parents("form").find("img.beta-captcha-img");
        n.attr("src", n.attr("lazy-src")), n.trigger("click"), e.fadeIn("fast");
    },
    refreshCaptcha: function(t) {
        t.preventDefault();
        var e = $(this).parents(".beta-controls").find(".refresh-captcha").attr("href"), n = $.ajax({
            url: e,
            dataType: "json",
            cache: !1
        });
        return n.done(function(t) {
            $(".beta-captcha-img").attr("src", t.url), $("body").data("captcha.hash", [ t.hash1, t.hash2 ]);
        }), !1;
    },
    loadMore: function() {
        var t = $(this), e = parseInt(t.attr("data-page")) + 1, n = t.attr("data-url"), i = {
            page: e
        }, s = $.ajax({
            url: n,
            dataType: "json",
            type: "get",
            data: i,
            cache: !1,
            beforeSend: function() {
                t.button("loading");
            }
        });
        s.done(function(n) {
            if (0 == n.errno) {
                var i = $(".beta-comment-item:last");
                0 == i.length && (i = $("#beta-comment-list")), i.after(n.html), n.html.length > 0 && t.attr("data-page", e);
            } else alert("Load more comments error");
        }), s.always(function() {
            t.button("reset");
        });
    }
};

CDMobile.addContact = function(t, e) {
    return "undefined" == typeof WeixinJSBridge ? !1 : (WeixinJSBridge.invoke("addContact", {
        webtype: "1",
        username: t
    }, function(t) {
        WeixinJSBridge.log(t.err_msg), e && e(t.err_msg);
    }), void 0);
};